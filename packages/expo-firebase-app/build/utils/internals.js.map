{"version":3,"file":"internals.js","sourceRoot":"","sources":["../../src/utils/internals.ts"],"names":[],"mappings":"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","sourcesContent":["import { Platform } from '@unimodules/core';\n\nconst NAMESPACE_PODS = {\n  admob: 'Firebase/AdMob',\n  analytics: 'Firebase/Analytics',\n  auth: 'Firebase/Auth',\n  config: 'Firebase/RemoteConfig',\n  crash: 'Firebase/Crash',\n  database: 'Firebase/Database',\n  links: 'Firebase/DynamicLinks',\n  messaging: 'Firebase/Messaging',\n  perf: 'Firebase/Performance',\n  storage: 'Firebase/Storage',\n};\n\nenum GRADLE_DEPS {\n  admob = 'ads',\n}\n\nconst PLAY_SERVICES_CODES = {\n  // $FlowExpectedError: Doesn't like numerical object keys: https://github.com/facebook/flow/issues/380\n  1: {\n    code: 'SERVICE_MISSING',\n    message: 'Google Play services is missing on this device.',\n  },\n  // $FlowExpectedError: Doesn't like numerical object keys: https://github.com/facebook/flow/issues/380\n  2: {\n    code: 'SERVICE_VERSION_UPDATE_REQUIRED',\n    message: 'The installed version of Google Play services on this device is out of date.',\n  },\n  // $FlowExpectedError: Doesn't like numerical object keys: https://github.com/facebook/flow/issues/380\n  3: {\n    code: 'SERVICE_DISABLED',\n    message: 'The installed version of Google Play services has been disabled on this device.',\n  },\n  // $FlowExpectedError: Doesn't like numerical object keys: https://github.com/facebook/flow/issues/380\n  9: {\n    code: 'SERVICE_INVALID',\n    message: 'The version of the Google Play services installed on this device is not authentic.',\n  },\n  // $FlowExpectedError: Doesn't like numerical object keys: https://github.com/facebook/flow/issues/380\n  18: {\n    code: 'SERVICE_UPDATING',\n    message: 'Google Play services is currently being updated on this device.',\n  },\n  // $FlowExpectedError: Doesn't like numerical object keys: https://github.com/facebook/flow/issues/380\n  19: {\n    code: 'SERVICE_MISSING_PERMISSION',\n    message: \"Google Play service doesn't have one or more required permissions.\",\n  },\n};\n\nexport default {\n  // default options\n  OPTIONS: {\n    logLevel: 'warn',\n    errorOnMissingPlayServices: true,\n    promptOnMissingPlayServices: true,\n  },\n\n  FLAGS: {\n    checkedPlayServices: false,\n  },\n\n  STRINGS: {\n    WARN_INITIALIZE_DEPRECATION:\n      \"Deprecation: Calling 'initializeApp()' for apps that are already initialised natively \" +\n      \"is unnecessary, use 'firebase.app()' instead to access the already initialized default app instance.\",\n\n    /**\n     * @return {string}\n     */\n    get ERROR_MISSING_CORE() {\n      if (Platform.OS === 'ios') {\n        return (\n          'ExpoFirebase core module was not found natively on iOS, ensure you have ' +\n          'correctly included the ExpoFirebase pod in your projects `Podfile` and have run `pod install`.' +\n          '\\r\\n\\r\\n See http://invertase.link/ios for the ios setup guide.'\n        );\n      }\n\n      return (\n        'ExpoFirebase core module was not found natively on Android, ensure you have ' +\n        'correctly added the ExpoFirebase and Firebase gradle dependencies to your `android/app/build.gradle` file.' +\n        '\\r\\n\\r\\n See http://invertase.link/android for the android setup guide.'\n      );\n    },\n\n    ERROR_INIT_OBJECT: 'Firebase.initializeApp(options <-- requires a valid configuration object.',\n    ERROR_INIT_STRING_NAME:\n      'Firebase.initializeApp(options, name <-- requires a valid string value.',\n\n    /**\n     * @return {string}\n     */\n    ERROR_INIT_SERVICE_URL_UNSUPPORTED(namespace: string) {\n      return `${namespace} does not support URL as a param, please pass in an app.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_MISSING_CB(method: string) {\n      return `Missing required callback for method ${method}().`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_MISSING_ARG(type: string, method: string) {\n      return `Missing required argument of type '${type}' for method '${method}()'.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_MISSING_ARG_NAMED(name: string, type: string, method: string) {\n      return `Missing required argument '${name}' of type '${type}' for method '${method}()'.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_ARG_INVALID_VALUE(name: string, expected: string, got: string) {\n      return `Invalid value for argument '${name}' expected value '${expected}' but got '${got}'.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_PROTECTED_PROP(name: string) {\n      return `Property '${name}' is protected and can not be overridden by extendApp.`;\n    },\n    ERROR_MISSING_IMPORT(name: string) {\n      return `Expo.Firebase: Module ${name} not included! Ensure it's installed with: yarn add expo-firebase-${name}`;\n    },\n\n    /**\n     * @return {string}\n     * @param namespace\n     * @param nativeModule\n     */\n    ERROR_MISSING_MODULE(namespace: string, nativeModule: string) {\n      const snippet = `firebase.${namespace}()`;\n      if (Platform.OS === 'ios') {\n        return (\n          `You attempted to use a firebase module that's not installed natively on your iOS project by calling ${snippet}.` +\n          '\\r\\n\\r\\nEnsure you have the required Firebase iOS SDK pod for this module included in your Podfile, in this instance ' +\n          `confirm you've added \"pod '${NAMESPACE_PODS[namespace]}'\" to your Podfile` +\n          '\\r\\n\\r\\nSee http://invertase.link/ios for full setup instructions.'\n        );\n      }\n\n      const fbSDKDep = `'com.google.firebase:firebase-${GRADLE_DEPS[namespace] || namespace}'`;\n      const exFirebasePackage = `'io.invertase.firebase.${namespace}.${nativeModule}Package'`;\n      const newInstance = `'new ${nativeModule}Package()'`;\n      return (\n        `You attempted to use a firebase module that's not installed on your Android project by calling ${snippet}.` +\n        `\\r\\n\\r\\nEnsure you have:\\r\\n\\r\\n1) Installed the required Firebase Android SDK dependency ${fbSDKDep} in your 'android/app/build.gradle' ` +\n        `file.\\r\\n\\r\\n2) Imported the ${exFirebasePackage} module in your 'MainApplication.java' file.\\r\\n\\r\\n3) Added the ` +\n        `${newInstance} line inside of the RN 'getPackages()' method list.` +\n        '\\r\\n\\r\\nSee http://invertase.link/android for full setup instructions.'\n      );\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_APP_NOT_INIT(appName: string) {\n      return `The [${appName}] firebase app has not been initialized!`;\n    },\n\n    /**\n     * @param optName\n     * @return {string}\n     * @constructor\n     */\n    ERROR_MISSING_OPT(optName: string) {\n      return `Failed to initialize app. FirebaseOptions missing or invalid '${optName}' property.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_NOT_APP(namespace: string) {\n      return `Invalid App instance passed to firebase.${namespace}(app <--).`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_UNSUPPORTED_CLASS_METHOD(className: string, method: string) {\n      return `${className}.${method}() is unsupported by the native Firebase SDKs.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_UNSUPPORTED_CLASS_PROPERTY(className: string, property: string) {\n      return `${className}.${property} is unsupported by the native Firebase SDKs.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_UNSUPPORTED_MODULE_METHOD(namespace: string, method: string) {\n      return `firebase.${namespace}().${method}() is unsupported by the native Firebase SDKs.`;\n    },\n\n    /**\n     * @return {string}\n     */\n    ERROR_PLAY_SERVICES(statusCode: number) {\n      const knownError = PLAY_SERVICES_CODES[statusCode];\n      let start =\n        'Google Play Services is required to run firebase services on android but a valid installation was not found on this device.';\n\n      if (statusCode === 2) {\n        start =\n          'Google Play Services is out of date and may cause some firebase services like authentication to hang when used. It is recommended that you update it.';\n      }\n\n      // eslint-disable-next-line prefer-template\n      return (\n        `${`${start}\\r\\n\\r\\n-------------------------\\r\\n`}${\n          knownError\n            ? `${knownError.code}: ${knownError.message} (code ${statusCode})`\n            : `A specific play store availability reason reason was not available (unknown code: ${statusCode})`\n        }\\r\\n-------------------------` +\n        `\\r\\n\\r\\n` +\n        `For more information on how to resolve this issue, configure Play Services checks or for guides on how to validate Play Services on your users devices see the link below:` +\n        `\\r\\n\\r\\nhttp://invertase.link/play-services`\n      );\n    },\n  },\n};\n"]}