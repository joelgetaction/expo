{"version":3,"file":"Notification.js","sourceRoot":"","sources":["../src/Notification.ts"],"names":[],"mappings":"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","sourcesContent":["import invariant from 'invariant';\n\nimport { Platform } from '@unimodules/core';\nimport { utils } from 'expo-firebase-app';\nimport AndroidNotification from './AndroidNotification';\nimport IOSNotification from './IOSNotification';\nimport { Notifications, NativeNotification } from './types';\nconst { generatePushID, isObject } = utils;\n\nexport type NotificationOpen = {\n  action: string;\n  notification: Notification;\n  results?: { [key: string]: string };\n};\n\nexport default class Notification {\n  // iOS 8/9 | 10+ | Android\n  _android: AndroidNotification;\n\n  _body: string = '';\n\n  // alertBody | body | contentText\n  _data: { [key: string]: string } = {};\n\n  // userInfo | userInfo | extras\n  _ios: IOSNotification;\n\n  _notificationId?: string;\n\n  _sound?: string;\n\n  // soundName | sound | sound\n  _subtitle?: string;\n\n  // N/A | subtitle | subText\n  _title: string = ''; // alertTitle | title | contentTitle\n\n  constructor(nativeNotification: NativeNotification | undefined, notifications: Notifications) {\n    if (nativeNotification) {\n      this._body = nativeNotification.body;\n      this._data = nativeNotification.data;\n      this._notificationId = nativeNotification.notificationId;\n      this._sound = nativeNotification.sound;\n      this._subtitle = nativeNotification.subtitle;\n      this._title = nativeNotification.title;\n    }\n\n    this._android = new AndroidNotification(this, nativeNotification && nativeNotification.android);\n    this._ios = new IOSNotification(\n      this,\n      notifications,\n      nativeNotification && nativeNotification.ios\n    );\n\n    // Defaults\n    this._data = this._data || {};\n    // TODO: Is this the best way to generate an ID?\n    this._notificationId = this._notificationId || generatePushID();\n  }\n\n  get android(): AndroidNotification {\n    return this._android;\n  }\n\n  get body(): string | undefined {\n    return this._body;\n  }\n\n  get data(): { [key: string]: string } | undefined {\n    return this._data;\n  }\n\n  get ios(): IOSNotification {\n    return this._ios;\n  }\n\n  get notificationId(): string | undefined {\n    return this._notificationId;\n  }\n\n  get sound(): string | undefined {\n    return this._sound;\n  }\n\n  get subtitle(): string | undefined {\n    return this._subtitle;\n  }\n\n  get title(): string | undefined {\n    return this._title;\n  }\n\n  /**\n   *\n   * @param body\n   * @returns {Notification}\n   */\n  setBody(body: string): Notification {\n    this._body = body;\n    return this;\n  }\n\n  /**\n   *\n   * @param data\n   * @returns {Notification}\n   */\n  setData(data: { [key: string]: any } = {}): Notification {\n    invariant(\n      isObject(data),\n      `Notification:withData expects an object but got type '${typeof data}'.`\n    );\n    this._data = data;\n    return this;\n  }\n\n  /**\n   *\n   * @param notificationId\n   * @returns {Notification}\n   */\n  setNotificationId(notificationId: string): Notification {\n    this._notificationId = notificationId;\n    return this;\n  }\n\n  /**\n   *\n   * @param sound\n   * @returns {Notification}\n   */\n  setSound(sound: string): Notification {\n    this._sound = sound;\n    return this;\n  }\n\n  /**\n   *\n   * @param subtitle\n   * @returns {Notification}\n   */\n  setSubtitle(subtitle: string): Notification {\n    this._subtitle = subtitle;\n    return this;\n  }\n\n  /**\n   *\n   * @param title\n   * @returns {Notification}\n   */\n  setTitle(title: string): Notification {\n    this._title = title;\n    return this;\n  }\n\n  build(): NativeNotification {\n    if (!this._notificationId)\n      throw new Error('Notification: Missing required `notificationId` property');\n\n    return {\n      android: Platform.OS === 'android' ? this._android.build() : undefined,\n      body: this._body,\n      data: this._data,\n      ios: Platform.OS === 'ios' ? this._ios.build() : undefined,\n      notificationId: this._notificationId,\n      sound: this._sound,\n      subtitle: this._subtitle,\n      title: this._title,\n    };\n  }\n}\n"]}